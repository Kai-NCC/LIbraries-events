{% extends "template.njk" %}

{% import "_pattern_macros/navigation_card.njk" as navcard %}
{% import "_pattern_macros/general_card.njk" as generalcard %}

{% block main %}

  <section class="breadcrumbs">
    <div class="container">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb my-2">
          <li class="breadcrumb-item"><a href="{{ '/' | url }}">Home</a></li>
          <li class="breadcrumb-item"><a href="{{ '/' | url }}">Libraries, local history and archives</a></li>
          <li class="breadcrumb-item"><a href="{{ '/' | url }}">Libraries</a></li>
          <li class="breadcrumb-item"><a href="{{ '/' | url }}">What's on in Norfolk libraries</a></li>
          <li class="breadcrumb-item active">Libraries events search</li>
        </ol>
      </nav>
    </div>
  </section>

  <section>
    <div class="container">
      <div class="row {{rowDefaults}}">
        <div class="col-12">
          <h1 class="h2">Libraries events search</h1>
          <p class="text-muted mt-4 mb-2">Enter keywords to search libraries events</p>
          <div class="search-wrapper my-0">
            <form class="form-inline d-flex libraries-search-area" role="search" action="{{ '/' | url }}" aria-label="Libraries events">
              <input class="form-control" type="search" placeholder="" aria-label="Search">
              <button id="libraries-search-button" class="btn btn-outline-light d-inline-flex justify-content-between" type="submit">Find events</button>
            </form>
          </div>
          <div class="row {{rowDefaults}}">
            <div class="search-component">
              <div class="search-settings">
                <div class="filters">
                  <form id="locationDropdownForm">
                    <div id="toggleLocation" class="dropdown">
                      <button class="dropdown-btn btn btn-outline-dark" type="button" id="dropdownMenuLocation" data-bs-toggle="dropdown" aria-expanded="false"  data-bs-auto-close="outside">
                        Location
                      </button>
                      <button class="modal-btn btn btn-outline-dark" type="button" id="filterModalLocationButton" data-bs-toggle="modal" data-bs-target="#filterModalLocation" aria-expanded="false"  data-bs-auto-close="outside">
                        Location
                      </button>
                      <ul class="dropdown-menu" aria-labelledby="dropdownMenuLocation">
                        <li class="selection-item">
                          <label class="form-check-label" for="collection1check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Acle" id="collection1check">
                            <div class="text-wrapper">
                              Acle 
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="collection2check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Attleborough" id="collection2check">
                            <div class="text-wrapper">
                              Attleborough
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="collection3check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Aylsham" id="collection3check">
                            <div class="text-wrapper">
                              Aylsham
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="collection4check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Blofield" id="collection4check">
                            <div class="text-wrapper">
                              Blofield
                            </div>
                          </label>
                        </li>

                        <li class="selection-item">  
                          <label class="form-check-label" for="collection5check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Brundall" id="collection5check">
                            <div class="text-wrapper">
                              Brundall
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="collection6check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Caister" id="collection6check">
                            <div class="text-wrapper">
                              Caister
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="collection7check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Costessy" id="collection7check">
                            <div class="text-wrapper">
                              Costessy
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="collection8check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Cromer" id="collection8check">
                            <div class="text-wrapper">
                              Cromer
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="collection9check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Dereham" id="collection9check">
                            <div class="text-wrapper">
                              Dereham
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="collection10check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Dersingham" id="collection10check">
                            <div class="text-wrapper">
                              Dersingham
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="collection11check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Diss" id="collection11check">
                            <div class="text-wrapper">
                              Diss
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="collection12check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Downham Market" id="collection12check">
                            <div class="text-wrapper">
                              Downham Market
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="collection13check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Earlham Norwich" id="collection13check">
                            <div class="text-wrapper">
                              Earlham Norwich
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="collection14check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Fakenham" id="collection14check">
                            <div class="text-wrapper">
                              Fakenham
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="collection15check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Gaywood" id="collection15check">
                            <div class="text-wrapper">
                              Gaywood
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="collection16check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Gorleston" id="collection16check">
                            <div class="text-wrapper">
                              Gorleston
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="collection17check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Great Yarmouth" id="collection17check">
                            <div class="text-wrapper">
                              Great Yarmouth
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="collection18check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Harleston" id="collection18check">
                            <div class="text-wrapper">
                              Harleston
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="collection19check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Hellesdon" id="collection19check">
                            <div class="text-wrapper">
                              Hellesdon
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="collection20check">
                            <input type="checkbox" class="form-check-input" name="locationOption" value="Hethersett" id="collection20check">
                            <div class="text-wrapper">
                              Hethersett
                            </div>
                          </label>
                        </li>
                        <ul class="dropdown-bottom-section">
                          <li><button class="filter-control-btn clear-filters" type="button" onclick="clearFiltersLocation()">Clear filters</button></li>
                          <li><button class="filter-control-btn apply-filter" type="button" onclick="applyFiltersLocation(this.form.locationOption)">Apply filters</button></li>
                        </ul>
                      </ul>
                    </div>
                  </form>
                  <form id="subjectDropdownForm">
                    <div id="toggleSubject" class="dropdown">
                      <button class="dropdown-btn btn btn-outline-dark" type="button" id="dropdownMenuSubject" data-bs-toggle="dropdown" aria-expanded="false"  data-bs-auto-close="outside">
                        Subject
                      </button>
                      <button class="modal-btn btn btn-outline-dark" type="button" id="filterModalSubjectButton" data-bs-toggle="modal" data-bs-target="#filterModalSubject" aria-expanded="false"  data-bs-auto-close="outside">
                        Subject
                      </button>
                      <ul class="dropdown-menu" aria-labelledby="dropdownMenuSubject">
                        <li class="selection-item">
                          <label class="form-check-label" for="subject1check">
                            <input type="checkbox" class="form-check-input" name="subjectOption" value="Autism-friendly" id="subject1check">
                            <div class="text-wrapper">
                              Autism-friendly
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="subject2check">
                            <input type="checkbox" class="form-check-input" name="subjectOption" value="Baby and Toddlers" id="subject2check">
                            <div class="text-wrapper">
                              Baby and Toddlers
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="subject3check">
                            <input type="checkbox" class="form-check-input" name="subjectOption" value="Business & Enterprise" id="subject3check">
                            <div class="text-wrapper">
                              Business & Enterprise
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="subject4check">
                            <input type="checkbox" class="form-check-input" name="subjectOption" value="Crafting" id="subject4check">
                            <div class="text-wrapper">
                              Crafting
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="subject5check">
                            <input type="checkbox" class="form-check-input" name="subjectOption" value="Creativity" id="subject5check">
                            <div class="text-wrapper">
                              Creativity
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="subject6check">
                            <input type="checkbox" class="form-check-input" name="subjectOption" value="Cultural Activities" id="subject6check">
                            <div class="text-wrapper">
                              Cultural Activities
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="subject7check">
                            <input type="checkbox" class="form-check-input" name="subjectOption" value="Digital" id="subject7check">
                            <div class="text-wrapper">
                              Digital
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="subject8check">
                            <input type="checkbox" class="form-check-input" name="subjectOption" value="Family Fun" id="subject8check">
                            <div class="text-wrapper">
                              Family Fun
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="subject9check">
                            <input type="checkbox" class="form-check-input" name="subjectOption" value="Health and Wellbeing" id="subject9check">
                            <div class="text-wrapper">
                              Health and Wellbeing
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="subject10check">
                            <input type="checkbox" class="form-check-input" name="subjectOption" value="Heritage" id="subject10check">
                            <div class="text-wrapper">
                              Heritage
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="subject11check">
                            <input type="checkbox" class="form-check-input" name="subjectOption" value="Reading" id="subject11check">
                            <div class="text-wrapper">
                              Reading
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="subject12check">
                            <input type="checkbox" class="form-check-input" name="subjectOption" value="SEND" id="subject12check">
                            <div class="text-wrapper">
                              SEND
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="subject13check">
                            <input type="checkbox" class="form-check-input" name="subjectOption" value="Skills and Training" id="subject13check">
                            <div class="text-wrapper">
                              Skills and Training
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="subject14check">
                            <input type="checkbox" class="form-check-input" name="subjectOption" value="Young People" id="subject14check">
                            <div class="text-wrapper">
                              Young People
                            </div>
                          </label>
                        </li>
                        <ul class="dropdown-bottom-section">
                          <li><button class="filter-control-btn clear-filters" type="button" onclick="clearFiltersSubject()">Clear filters</button></li>
                          <li><button class="filter-control-btn apply-filter" type="button" onclick="applyFiltersSubject(this.form.subjectOption)">Apply filters</button></li>
                        </ul>
                      </ul>
                    </div>
                  </form>
                  <form id="dateDropdownForm">
                    <div id="toggleDate" class="dropdown">
                      <button class="dropdown-btn btn btn-outline-dark" type="button" id="dropdownMenuDate" data-bs-toggle="dropdown" aria-expanded="false"  data-bs-auto-close="outside">
                        Date range
                      </button>
                      <button class="modal-btn btn btn-outline-dark" type="button" id="filterModalDateButton" data-bs-toggle="modal" data-bs-target="#filterModalDate" aria-expanded="false"  data-bs-auto-close="outside">
                        Date range
                      </button>
                      <ul class="dropdown-menu" aria-labelledby="dropdownMenuDate">
                        (Date picker goes here)
                        <ul class="dropdown-bottom-section">
                          <li><button class="filter-control-btn clear-filters" type="button" onclick="S()">Clear filters</button></li>
                          <li><button class="filter-control-btn apply-filter" type="button" onclick="">Apply filters</button></li>
                        </ul>
                      </ul>
                    </div>
                  </form>
                </div>
              </div>
              <!-- Modal - Location -->
              <div class="modal fade" id="filterModalLocation" tabindex="-1" aria-labelledby="filterModalLabelLocation" aria-hidden="true">
                <div class="modal-dialog modal-xl">
                  <div class="modal-content">
                    <form id="locationModalForm">
                      <div class="modal-header">
                        <h3 class="modal-title" id="filterModalLabelLocation">Location</h3>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close filters"></button>
                      </div>
                      <div class="modal-body">
                        <div class="filter-section">
                            <ul class="section-list">
                              <li class="selection-item">
                                <label class="form-check-label" for="collection1checkModal">
                                  <input type="checkbox" class="form-check-input"  name="locationModalOption" value="Acle" id="collection1checkModal">
                                  <div class="text-wrapper">
                                    Acle
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">
                                <label class="form-check-label" for="collection2checkModal">
                                  <input type="checkbox" class="form-check-input" name="locationModalOption" value="Attleborough"  id="collection2checkModal">
                                  <div class="text-wrapper">
                                    Attleborough
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">  
                                <label class="form-check-label" for="collection3checkModal">
                                  <input type="checkbox" class="form-check-input" name="locationModalOption" value="Aylsham"  id="collection3checkModal">
                                  <div class="text-wrapper">
                                    Aylsham
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">
                                <label class="form-check-label" for="collection4checkModal">
                                  <input type="checkbox" class="form-check-input" name="locationModalOption" value="Blofield"  id="collection4checkModal">
                                  <div class="text-wrapper">
                                    Blofield
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">
                                <label class="form-check-label" for="collection5checkModal">
                                  <input type="checkbox" class="form-check-input" name="locationModalOption" value="Brundall"  id="collection5checkModal">
                                  <div class="text-wrapper">
                                    Brundall
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">
                                <label class="form-check-label" for="collection6checkModal">
                                  <input type="checkbox" class="form-check-input"  name="locationModalOption" value="Caister" id="collection6checkModal">
                                  <div class="text-wrapper">
                                    Caister
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">
                                <label class="form-check-label" for="collection7checkModal">
                                  <input type="checkbox" class="form-check-input"  name="locationModalOption" value="Costessy" id="collection7checkModal">
                                  <div class="text-wrapper">
                                    Costessy
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">
                                <label class="form-check-label" for="collection8checkModal">
                                  <input type="checkbox" class="form-check-input"  name="locationModalOption" value="Cromer" id="collection8checkModal">
                                  <div class="text-wrapper">
                                    Cromer
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">
                                <label class="form-check-label" for="collection9checkModal">
                                  <input type="checkbox" class="form-check-input" name="locationModalOption" value="Dereham"  id="collection9checkModal">
                                  <div class="text-wrapper">
                                    Dereham
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">
                                <label class="form-check-label" for="collection10checkModal">
                                  <input type="checkbox" class="form-check-input"  name="locationModalOption" value="Dersingham" id="collection10checkModal">
                                  <div class="text-wrapper">
                                    Dersingham
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">
                                <label class="form-check-label" for="collection11checkModal">
                                  <input type="checkbox" class="form-check-input"  name="locationModalOption" value="Diss" id="collection11checkModal">
                                  <div class="text-wrapper">
                                    Diss
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">
                                <label class="form-check-label" for="collection12checkModal">
                                  <input type="checkbox" class="form-check-input"  name="locationModalOption" value="Downham Market" id="collection12checkModal">
                                  <div class="text-wrapper">
                                    Downham Market
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">
                                <label class="form-check-label" for="collection13checkModal">
                                  <input type="checkbox" class="form-check-input"  name="locationModalOption" value="Earlham Norwich" id="collection13checkModal">
                                  <div class="text-wrapper">
                                    Earlham Norwich
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">
                                <label class="form-check-label" for="collection14checkModal">
                                  <input type="checkbox" class="form-check-input"  name="locationModalOption" value="Fakenham" id="collection14checkModal">
                                  <div class="text-wrapper">
                                    Fakenham
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">
                                <label class="form-check-label" for="collection15checkModal">
                                  <input type="checkbox" class="form-check-input" name="locationModalOption" value="Gaywood"  id="collection15checkModal">
                                  <div class="text-wrapper">
                                    Gaywood
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">
                                <label class="form-check-label" for="collection16checkModal">
                                  <input type="checkbox" class="form-check-input" name="locationModalOption" value="Gorleston"  id="collection16checkModal">
                                  <div class="text-wrapper">
                                    Gorleston
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">
                                <label class="form-check-label" for="collection17checkModal">
                                  <input type="checkbox" class="form-check-input" name="locationModalOption" value="Great Yarmouth"  id="collection17checkModal">
                                  <div class="text-wrapper">
                                    Great Yarmouth
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">
                                <label class="form-check-label" for="collection18checkModal">
                                  <input type="checkbox" class="form-check-input" name="locationModalOption" value="Harleston"  id="collection18checkModal">
                                  <div class="text-wrapper">
                                    Harleston
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">
                                <label class="form-check-label" for="collection19checkModal">
                                  <input type="checkbox" class="form-check-input" name="locationModalOption" value="Hellesdon"  id="collection19checkModal">
                                  <div class="text-wrapper">
                                    Hellesdon
                                  </div>
                                </label>
                              </li>
                              <li class="selection-item">
                                <label class="form-check-label" for="collection20heckModal">
                                  <input type="checkbox" class="form-check-input" name="locationModalOption" value="Hethersett" id="collection20checkModal">
                                  <div class="text-wrapper">
                                    Hethersett
                                  </div>
                                </label>
                              </li>
                            </ul>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <ul class="dropdown-bottom-section">
                          <li><button class="filter-control-btn clear-filters" type="button" onclick="clearFiltersLocation()">Clear filters</button></li>
                          <li><button class="filter-control-btn apply-filter" type="button" onclick="applyFiltersLocation(this.form.locationModalOption)">Apply filters</button></li>
                        </ul>
                      </div>
                    </form>
                  </div>
                </div>
              </div> 
              <!-- Modal - Subject -->
              <div class="modal fade" id="filterModalSubject" tabindex="-1" aria-labelledby="filterModalLabelSubject" aria-hidden="true">
                <div class="modal-dialog modal-xl">
                  <div class="modal-content">
                    <form id="subjectModalForm">
                      <div class="modal-header">
                        <h3 class="modal-title" id="filterModalLabelSubject">Subject</h3>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close filters"></button>
                      </div>
                      <div class="modal-body">
                        <div class="filter-section">
                          <ul class="section-list">
                            <li class="selection-item">
                              <label class="form-check-label" for="subject1checkModal">
                                <input type="checkbox" class="form-check-input" name="subjectModalOption" value="Autism-friendly" id="subject1checkModal">
                                <div class="text-wrapper">
                                  Autism-friendly
                                </div>
                              </label>
                            </li>
                            <li class="selection-item">
                              <label class="form-check-label" for="subject2checkModal">
                                <input type="checkbox" class="form-check-input" name="subjectModalOption" value="Baby and Toddlers" id="subject2checkModal">
                                <div class="text-wrapper">
                                  Baby and Toddlers
                                </div>
                              </label>
                            </li>
                            <li class="selection-item">
                              <label class="form-check-label" for="subject3checkModal">
                                <input type="checkbox" class="form-check-input" name="subjectModalOption" value="Business & Enterprise" id="subject3checkModal">
                                <div class="text-wrapper">
                                  Business & Enterprise
                                </div>
                              </label>
                            </li>
                            <li class="selection-item">
                              <label class="form-check-label" for="subject4checkModal">
                                <input type="checkbox" class="form-check-input" name="subjectModalOption" value="Crafting" id="subject4checkModal">
                                <div class="text-wrapper">
                                  Crafting
                                </div>
                              </label>
                            </li>
                            <li class="selection-item">
                              <label class="form-check-label" for="subject5checkModal">
                                <input type="checkbox" class="form-check-input" name="subjectModalOption" value="Creativity" id="subject5checkModal">
                                <div class="text-wrapper">
                                  Creativity
                                </div>
                              </label>
                            </li>
                            <li class="selection-item">
                              <label class="form-check-label" for="subject6checkModal">
                                <input type="checkbox" class="form-check-input" name="subjectModalOption" value="Cultural Activities" id="subject6checkModal">
                                <div class="text-wrapper">
                                  Cultural Activities
                                </div>
                              </label>
                            </li>
                            <li class="selection-item">
                              <label class="form-check-label" for="subject7checkModal">
                                <input type="checkbox" class="form-check-input" name="subjectModalOption" value="Digital" id="subject7checkModal">
                                <div class="text-wrapper">
                                  Digital
                                </div>
                              </label>
                            </li>
                            <li class="selection-item">
                              <label class="form-check-label" for="subject8checkModal">
                                <input type="checkbox" class="form-check-input" name="subjectModalOption" value="Family Fun" id="subject8checkModal">
                                <div class="text-wrapper">
                                  Family Fun
                                </div>
                              </label>
                            </li>
                            <li class="selection-item">
                              <label class="form-check-label" for="subject9checkModal">
                                <input type="checkbox" class="form-check-input" name="subjectModalOption" value="Health and Wellbeing" id="subject9checkModal">
                                <div class="text-wrapper">
                                  Health and Wellbeing
                                </div>
                              </label>
                            </li>
                            <li class="selection-item">
                              <label class="form-check-label" for="subject10checkModal">
                                <input type="checkbox" class="form-check-input" name="subjectModalOption" value="Heritage" id="subject10checkModal">
                                <div class="text-wrapper">
                                  Heritage
                                </div>
                              </label>
                            </li>
                            <li class="selection-item">
                              <label class="form-check-label" for="subject11checkModal">
                                <input type="checkbox" class="form-check-input" name="subjectModalOption" value="Reading" id="subject11checkModal">
                                <div class="text-wrapper">
                                  Reading
                                </div>
                              </label>
                            </li>
                            <li class="selection-item">
                              <label class="form-check-label" for="subject12checkModal">
                                <input type="checkbox" class="form-check-input" name="subjectModalOption" value="SEND" id="subject12checkModal">
                                <div class="text-wrapper">
                                  SEND
                                </div>
                              </label>
                            </li>
                            <li class="selection-item">
                              <label class="form-check-label" for="subject13checkModal">
                                <input type="checkbox" class="form-check-input" name="subjectModalOption" value="Skills and Training" id="subject13checkModal">
                                <div class="text-wrapper">
                                  Skills and Training
                                </div>
                              </label>
                            </li>
                            <li class="selection-item">
                              <label class="form-check-label" for="subject14checkModal">
                                <input type="checkbox" class="form-check-input" name="subjectModalOption" value="Young People" id="subject14checkModal">
                                <div class="text-wrapper">
                                  Young People
                                </div>
                              </label>
                            </li>
                          </ul>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <ul class="dropdown-bottom-section">
                          <li><button class="filter-control-btn clear-filters" type="button" onclick="clearFiltersSubject()">Clear filters</button></li>
                          <li><button class="filter-control-btn apply-filter" type="button" onclick="applyFiltersSubject(this.form.subjectModalOption)">Apply filters</button></li>
                        </ul>
                      </div>
                    </form>
                  </div>
                </div>
              </div> 
              <!-- Modal - Date -->
              <div class="modal fade" id="filterModalDate" tabindex="-1" aria-labelledby="filterModalLabelDate" aria-hidden="true">
                <div class="modal-dialog modal-xl">
                  <div class="modal-content">
                    <form id="dateModalForm">
                      <div class="modal-header">
                        <h3 class="modal-title" id="filterModalLabelDate">Date range</h3>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close filters"></button>
                      </div>
                      <div class="modal-body">
                        (date picker goes here)
                      </div>
                      <div class="modal-footer">
                        <ul class="dropdown-bottom-section">
                          <li><button class="filter-control-btn clear-filters" type="button" onclick="">Clear filters</button></li>
                          <li><button class="filter-control-btn apply-filter" type="button" onclick="">Apply filters</button></li>
                        </ul>
                      </div>
                    </form>
                  </div>
                </div>
              </div> 
            </div>
            <hr class="ncc-hr">
            <div class="row {{rowDefaults}}" id="page-1">
              <div class="col-12 col-sm-6 col-lg-4">
                {{ generalcard.generalcard('Just a Cuppa', 'Acle • Acle Library', '07 June 2022 • 2pm', 'Free', '1 session • few spaces left', 'Fancy making some new friends, or just to have a good old chat?', '', '/', 'card-light') }}
              </div>
              <div class="col-12 col-sm-6 col-lg-4">
                {{ generalcard.generalcard('Bounce and Rhyme', 'Acle • Acle Library', '09 June 2022 • 2:15pm', 'Free', '1 session • places available', 'Songs and rhymes for babies, toddlers and their parents and carers.', '', '/', 'card-light') }}
              </div>
              <div class="col-12 col-sm-6 col-lg-4">
                {{ generalcard.generalcard('Lego Club', 'Acle • Acle Library', '10 June 2022 • 4pm', 'Free', '1 session • places available', 'Each session brick defying Lego challenges are set to really get your children enjoying creative problem solving and just having fun with other children.', '', '/', 'card-light') }}
              </div>
            </div>
            <div class="row {{rowDefaults}}" id="page-2" style="display: none;">
              <div class="col-12 col-sm-6 col-lg-4">
                {{ generalcard.generalcard('Bounce and Rhyme', 'Acle • Acle Library', '09 June 2022 • 2:15pm', 'Free', '1 session • places available', 'Songs and rhymes for babies, toddlers and their parents and carers.', '', '/', 'card-light') }}
              </div>
              <div class="col-12 col-sm-6 col-lg-4">
                {{ generalcard.generalcard('Lego Club', 'Acle • Acle Library', '10 June 2022 • 4pm', 'Free', '1 session • places available', 'Each session brick defying Lego challenges are set to really get your children enjoying creative problem solving and just having fun with other children.', '', '/', 'card-light') }}
              </div>
              <div class="col-12 col-sm-6 col-lg-4">
                {{ generalcard.generalcard('Just a Cuppa', 'Acle • Acle Library', '07 June 2022 • 2pm', 'Free', '1 session • few spaces left', 'Fancy making some new friends, or just to have a good old chat?', '', '/', 'card-light') }}
              </div>
            </div>
            <div class="row {{rowDefaults}}" id="page-3" style="display: none;">
              <div class="col-12 col-sm-6 col-lg-4">
                {{ generalcard.generalcard('Just a Cuppa', 'Acle • Acle Library', '07 June 2022 • 2pm', 'Free', '1 session • few spaces left', 'Fancy making some new friends, or just to have a good old chat?', '', '/', 'card-light') }}
              </div>
              <div class="col-12 col-sm-6 col-lg-4">
                {{ generalcard.generalcard('Bounce and Rhyme', 'Acle • Acle Library', '09 June 2022 • 2:15pm', 'Free', '1 session • places available', 'Songs and rhymes for babies, toddlers and their parents and carers.', '', '/', 'card-light') }}
              </div>
            </div>

            <nav aria-label="Acle library events pagination" style="float: left"> 
            <ul class="pagination libraries-pagination">
              <li id="page-prev-link" class="page-item disabled">
                <button class="page-link" onclick="prevPage()" tabindex="-1">Previous</button>
              </li>
              <li id="page1-link" class="page-item active">
                <button class="page-link" onclick="showPage(1)">1</button>
              </li>
              <li id="page2-link" class="page-item">
                <button class="page-link" onclick="showPage(2)">2</button>
              </li>
              <li id="page3-link" class="page-item">
                <button class="page-link" onclick="showPage(3)">3</button>
              </li>
              <li id="page-next-link" class="page-item">
                <button class="page-link" onclick="nextPage()">Next</button>
              </li>
            </ul>
          </nav>

          </div>
        </div>
      </div>
    </div>

    <script>

      let currentPage = 1;

      const page1 = document.getElementById("page-1");
      const page2 = document.getElementById("page-2");
      const page3 = document.getElementById("page-3");

      const link1 = document.getElementById("page1-link");
      const link2 = document.getElementById("page2-link");
      const link3 = document.getElementById("page3-link");

      const linkPrev = document.getElementById("page-prev-link");
      const linkNext = document.getElementById("page-next-link");

      let numberOfLocations = 0;
      let numberOfSubjects = 0;

      window.onload = function() {
        let locations = getCookie('locationsList');
        let subjects = getCookie('subjectsList');

        if (locations === '') {
          console.log(`locations cookie empty, returning`);
        } else {
          let locationsArray = locations.split(",");
          console.log(`cookie contents= ${locations}`);

          let locationsForm = document.getElementById("locationDropdownForm");
          let locationsModalForm = document.getElementById("locationModalForm");

          for (var i = 0; i < locationsForm.length; i++) {
            console.log(`checkbox ${i} = ${locationsForm[i].value}`);
            if (locationsForm[i].value)
            numberOfLocations++;
          }

          let checkedLocations = [];

          for (i = 0; i < locationsArray.length; i++) {
            console.log(`analysing option ${locationsArray[i]}`);
            for (j = 0; j < locationsForm.length; j++) {
              if (locationsForm[j].value == locationsArray[i]) {
                console.log(`input value ${locationsForm[j].value} == ${locationsArray[i]}, checked`);
                locationsForm[j].checked = true;
                locationsModalForm[j-1].checked = true; // no idea why this is the case, will revist
                checkedLocations.push(locationsArray[i]);
              }
            }
          }

          updateLocationBtn(checkedLocations);

          let currentPage = 1;
          page2.style.display = "none";
          page3.style.display = "none";
        }

        if (subjects === '') {
          console.log(`subjects cookie empty, returning`);
        } else {
          let subjectsArray = subjects.split(",");
          console.log(`cookie contents= ${subjects}`);

          let subjectsForm = document.getElementById("subjectDropdownForm");
          let subjectsModalForm = document.getElementById("subjectModalForm");

          for (var i = 0; i < subjectsForm.length; i++) {
            console.log(`checkbox ${i} = ${subjectsForm[i].value}`);
            if (subjectsForm[i].value)
            numberOfSubjects++;
          }

          let checkedSubjects = [];

          for (i = 0; i < subjectsArray.length; i++) {
            console.log(`analysing option ${subjectsArray[i]}`);
            for (j = 0; j < subjectsForm.length; j++) {
              if (subjectsForm[j].value == subjectsArray[i]) {
                console.log(`input value ${subjectsForm[j].value} == ${subjectsArray[i]}, checked`);
                subjectsForm[j].checked = true;
                subjectsModalForm[j-1].checked = true;
                checkedSubjects.push(subjectsArray[i]);
              }
            }
          }

          updateSubjectBtn(checkedSubjects);
        }
        
      }

      function updateLocationBtn(locationsArray) {
        let dropdownButton = document.getElementById("dropdownMenuLocation");
        let modalButton = document.getElementById("filterModalLocationButton");

        console.log(`CHECKED LOCATIONS = ${locationsArray}`);

        if (locationsArray.length > 1) {
          console.log(`MORE THAN one location, setting button text to = ${locationsArray.length}`);
          dropdownButton.innerHTML = `Location • ${locationsArray.length}`;
          modalButton.innerHTML = `Location • ${locationsArray.length}`;
        } else if (locationsArray.length == 1) {
          console.log(`one location, setting button text to = ${locationsArray[0]}`);
          dropdownButton.innerHTML = `${locationsArray[0]}`;
          modalButton.innerHTML = `${locationsArray[0]}`;
        } else {
          console.log(`other, setting button text to = Location`);
          dropdownButton.innerHTML = `Location`;
          modalButton.innerHTML = `Location`;
        }
      }
      function updateSubjectBtn(subjectsArray) {
        let dropdownButton = document.getElementById("dropdownMenuSubject");
        let modalButton = document.getElementById("filterModalSubjectButton");

        console.log(`CHECKED SUBJECTS = ${subjectsArray}`);

        if (subjectsArray.length > 1) {
          console.log(`MORE THAN one subject, setting button text to = ${subjectsArray.length}`);
          dropdownButton.innerHTML = `Subject • ${subjectsArray.length}`;
          modalButton.innerHTML = `Subject • ${subjectsArray.length}`;
        } else if (subjectsArray.length == 1) {
          console.log(`one subject, setting button text to = ${subjectsArray[0]}`);
          dropdownButton.innerHTML = `${subjectsArray[0]}`;
          modalButton.innerHTML = `${subjectsArray[0]}`;
        } else {
          console.log(`other, setting button text to = Subject`);
          dropdownButton.innerHTML = `Subject`;
          modalButton.innerHTML = `Subject`;
        }
      }

      function applyFiltersLocation(locations) {
        let locationsList = [];

        for (var i = 0; i < locations.length; i++) {
          if (locations[i].checked) {
            text = locations[i].value;
            locationsList.push(text);
            console.log(`added location ${text}`);
          }
        }

        console.log(`list of locations= ${locationsList}`);

        let hour = 1/24;
        setCookie('locationsList', locationsList, hour);

        window.location.href = "{{ '/libraries-events-search' | url }}";
      }

      function applyFiltersSubject(subjects) {
        let subjectsList = [];

        for (var i = 0; i < subjects.length; i++) {
          if (subjects[i].checked) {
            text = subjects[i].value;
            subjectsList.push(text);
            console.log(`added subject ${text}`);
          }
        }

        console.log(`list of subjects= ${subjectsList}`);

        let hour = 1/24;
        setCookie('subjectsList', subjectsList, hour);

        window.location.href = "{{ '/libraries-events-search' | url }}";
      }
      
      function clearFiltersLocation() {
        let locationsList = [];

        let hour = 1/24;
        setCookie('locationsList', locationsList, hour);

        window.location.href = "{{ '/libraries-events-search' | url }}";
      }
      function clearFiltersSubject() {
        let subjectsList = [];

        let hour = 1/24;
        setCookie('subjectsList', subjectsList, hour);

        window.location.href = "{{ '/libraries-events-search' | url }}";
      }

      function setCookie(cname, cvalue, exdays) {
        const d = new Date();
        d.setTime(d.getTime() + (exdays*24*60*60*1000));
        let expires = "expires="+ d.toUTCString();
        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
      }

      function getCookie(cname) {
        let name = cname + "=";
        let decodedCookie = decodeURIComponent(document.cookie);
        let ca = decodedCookie.split(';');
        for(let i = 0; i <ca.length; i++) {
          let c = ca[i];
          while (c.charAt(0) == ' ') {
            c = c.substring(1);
          }
          if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
          }
        }
        return "";
      }

      function nextPage() {
        if (currentPage >= 3) return;
        showPage(currentPage + 1);
      }

      function prevPage() {
        if (currentPage <= 1) return;
        showPage(currentPage - 1);
      }

      function showPage(pageNum) {
        
        if (pageNum == 1) {
          page1.style.display = "flex";
          page2.style.display = "none";
          page3.style.display = "none";

          link1.classList.add("active");
          link2.classList.remove("active");
          link3.classList.remove("active");

          linkPrev.classList.add("disabled");
          linkPrev.firstElementChild.tabIndex="-1";
          linkNext.classList.remove("disabled");
          linkNext.firstElementChild.tabIndex="0";
          currentPage = 1;

          page1.getElementsByTagName('a')[0].focus();

          page1.scrollIntoView();
        } else if (pageNum == 2) {
          page1.style.display = "none";
          page2.style.display = "flex";
          page3.style.display = "none";

          link1.classList.remove("active");
          link2.classList.add("active");
          link3.classList.remove("active");

          linkPrev.classList.remove("disabled");
          linkPrev.firstElementChild.tabIndex="0";
          linkNext.classList.remove("disabled");
          linkNext.firstElementChild.tabIndex="0";
          currentPage = 2;

          page2.getElementsByTagName('a')[0].focus();

          page2.scrollIntoView();
        } else if (pageNum == 3) {
          page1.style.display = "none";
          page2.style.display = "none";
          page3.style.display = "flex";

          link1.classList.remove("active");
          link2.classList.remove("active");
          link3.classList.add("active");

          linkPrev.classList.remove("disabled");
          linkPrev.firstElementChild.tabIndex="0";
          linkNext.classList.add("disabled");
          linkNext.firstElementChild.tabIndex="-1";
          currentPage = 3;

          page3.getElementsByTagName('a')[0].focus();

          page3.scrollIntoView();
        } else {
          console.log("pagination error");
        }
      }

    </script>

  </section>
{% endblock %}
